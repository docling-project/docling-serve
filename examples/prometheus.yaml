# Prometheus configuration for scraping metrics

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'docling-cluster'
    replica: '1'

scrape_configs:
  # Scrape docling-serve metrics endpoint directly
  - job_name: 'docling-serve'
    static_configs:
      - targets: ['docling-serve:5001']
        labels:
          service: 'docling-serve'
  
  # Scrape OTEL collector's own metrics
  - job_name: 'otel-collector'
    static_configs:
      - targets: ['otel-collector:8888']
        labels:
          service: 'otel-collector'
  
  # Scrape metrics exported by OTEL collector
  - job_name: 'otel-metrics'
    static_configs:
      - targets: ['otel-collector:8889']
        labels:
          service: 'docling-otel-metrics'
